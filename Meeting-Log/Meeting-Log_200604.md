# Final project log(20.06.04)

> 다음 문서는 19.12.09~20.06.20까지 진행된 혁신성장 이미지 분석 AI 서비스 개발 실무 과정의 최종 프로젝트 진행 사항을 기록한 것이다.

## 목차

1. 금주 일정 공지사항
2. 프로젝트 진행사항
3. 해결해야 할 문제점
4. 추가 고려 사항
5. 이후 일정

## 0. 금주 일정 공지사항

> 일반적인 작업 진행 스케줄은 앞의 로그에 포함되어 있으므로 생략

- 06/04(금) : 웹페이지 UI 및 전체 서비스 플로우 피드백
- 06/06(토) : 멘토링(최종 프로젝트 시연 및 포트폴리오 첨삭)
  - 최종 프로젝트 시연, 발표
  - 개인 포트폴리오 초안 준비해 올 것

## 1. 프로젝트 진행 사항

[![전체 웹 개발 구성도3](https://user-images.githubusercontent.com/58945760/83759686-e41f5380-a6ae-11ea-87ad-7721c1eeb9d1.PNG)](https://user-images.githubusercontent.com/58945760/83759686-e41f5380-a6ae-11ea-87ad-7721c1eeb9d1.PNG)

1. **음악 추천 알고리즘** 구성, 웹 적용

   - 웹 크롤러와 playlist 수록곡 선택을 이용한 추천곡 재생(20.05.27~)

     - 추천곡 기반으로 또 다른 추천곡 재생하는 페이지 생성

       - youtube video id를 얻어오기 위한 구글 웹 크롤링 개선

         1. `div class` 3개(`AP7Wnd`, `rl7ilb`, `kCrYT`)를 기준으로 확립

            - youtube 링크가 담긴 `href`를 포함하는 `a` 태그를 추출
            - 기준 적용 순서는 `AP7Wnd` > `rl7ilb` > `kCrYT`
            - 위의 기준에서 youtube 링크를 찾아내지 못할 시 재크롤링

         2. 재크롤링을 위한 함수 생성

            > 재크롤링의 경우 이하의 경우에 적용

            1. `kCrYT` `class`를 기준으로 `a` 태그 자체가 검출되지 않았을 때
            2. `a` 태그 검출과 `href` 추출, `list` 추가에 성공하였으나 `list` 내 youtube 링크가 존재하지 않을 때

         3. 현재 재생곡 제목, 아티스트 표시

            - `views.py`와 `html`의 if 문을 활용하여 재크롤링의 여부와 상관없이 현재 재생되는 곡의 제목과 아티스트가 웹페이지 상단에 표시되도록 함

       - 음악 추천 알고리즘 개선

         - 같은 곡이 계속 추천되는 문제점 개선
         - `random` 함수와 `while`을 활용하여 태그가 추출되지 않는 예외 해결

2. **AWS 프리 티어를 활용한 웹 배포**(20.05.26~)

   - `Elastic Beanstalk`로 웹페이지 배포
     - 용량 부족과 오류, django 버전 호환 문제 등으로 중단했었으나 `EC2`의 계속적인 오류로 S3 서비스를 활용하여 서버 연동 중

3. 프로젝트 [README.md](https://github.com/dannylee93/Emotion-Recognition/blob/master/README.md#emotion-recognition) 작성(20.04.13~, 진행중)

4. 최종 프로젝트 발표 PPT 작성 중(20.06.02~, 진행중)

## 2. 해결해야 할 문제점

- 음악 추천 알고리즘 관련 문제
  - ~~음악 알고리즘 적용 시 같은 곡이 반복되서 추천되는 상황 발생~~ 추천 알고리즘 조정으로 해결
  - ~~메타 데이터에 곡 id가 존재하지만 train set의 playlist에는 포함되지 않아 tag를 붙일 수 없는 곡들이 존재~~train set의 playlist에 속하지 않은 곡들 삭제로 해결
  - 음악 추천 알고리즘 웹 적용 시 Youtube data api 반복 로그인 문제 해결
- 실시간 플레이리스트 적용 방법 서치
  - 실시간 적용이 불가할 경우, 이하의 방법 논의 가능
    1. 사용자가 재생 playlist 중 선호하는 곡을 선택=> 해당 곡을 input으로 추천 알고리즘 구동 => 새로운 웹페이지를 생성하여 해당 추천곡 재생(동시 진행 중)
    2. 사용자에게 playlist의 곡들에 대해 호불호를 표시하도록 함 => 사용자가 선호하는 곡만으로 추천 알고리즘 구동=> 새로운 웹페이지를 생성하여 해당 추천곡 재생
    3. 사용자의 수가 표시되도록 웹페이지 설정, 사용자 수가 일정 이상을 넘으면 수작업으로 playlist 추가
- 모델 Output 편중 현상 해결
- ~~음악 추천 알고리즘 input 고정 문제~~ 곡 이름을 input 태그의 value로 넣고 type을 submit로 하여 해결
- 웹 크롤링에서 video id 추출 실패 횟수 최소화
  - ~~검색 시 동영상 자체가 나오지 않는 곡 다수 존재~~재크롤링 함수로 해결

## 3. 추가 고려 사항

1. 분류 모델 알고리즘 검증 방법, 기준
   - 사람에 따라 표정을 구분하는 정확도가 다르게 느껴지는 경우가 있음. 그 차이를 최대한 좁히는 것을 목표로 함
2. 웹페이지 프론트엔드 수정
3. **홈페이지 배포 시 웹캠 작동 확인**
4. 홈페이지 배포 시 동영상 재생 확인
5. 모바일 접속 시 카메라 접근 코드 서치 및 확인

## 4. 이후 일정(변동사항 반영)

1. 5/20~6/7 : 최종 프로젝트 ppt 제작(이경희), 웹페이지 배포(김지승)

2. 6/1~6/13 : 문서 정리 및 서류 작업(이동규, 제출 필수 서류는

    

   굵은 글씨

   로 표시)

   1. Readme.md
   2. **최종 프로젝트 PPT(원본, PDF) : ~ 06/17(수)까지**
   3. **프로젝트 계획서**
   4. **원본 소스코드 : ~ 06/19(금) 오전 12시까지**
   5. **최종 결과보고서 : ~ 06/17(수)까지**
   6. `github repository` 정리

3. 6/8~6/19 : 카카오 아레나 및 데이콘 준비